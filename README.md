# 留学生工时记录器

一个用于管理留学生兼职工作时间和收入的Web应用程序。

## 功能特性

- ✅ **工作时间记录** - 记录每天的工作时间、休息时间和时薪
- ✅ **收入统计** - 自动计算日/周/月收入和工作时长
- ✅ **假期管理** - 设置假期日期，自动调整周工时上限
- ✅ **数据导入/导出** - 支持CSV、Excel、PDF格式
- ✅ **多公司管理** - 管理多个兼职公司，支持Logo显示
- ✅ **可视化图表** - 统计图表展示工作趋势
- ✅ **深色模式** - 支持浅色/深色主题切换
- ✅ **移动端优化** - 响应式设计，支持手机访问
- ✅ **数据搜索** - 快速搜索历史记录
- ✅ **快捷键支持** - 键盘快捷操作

## 技术栈

### 前端
- **JavaScript** - Vanilla ES6+（无框架依赖）
- **Chart.js** - 数据可视化
- **jsPDF** - PDF导出
- **SheetJS** - Excel处理
- **自定义CSS** - 响应式设计 + 深色模式

### 后端
- **PHP 7.4+** - 服务端逻辑
- **SQLite** - 轻量级数据库
- **CSRF保护** - 安全性保障

## 目录结构

```
parttime.huakon.serv00.net/public_html/
├── README.md                 # 项目说明
├── api.php                   # 主 API 端点
├── config.php                # 数据库配置
├── db.php                    # 数据库连接
├── data/                     # 数据库文件
├── lib/                      # PHP业务逻辑库
│   ├── entries.php           # 工作记录操作
│   ├── settings.php          # 设置管理
│   ├── vacations.php         # 假期管理
│   └── vacation_ranges.php   # 假期范围计算
└── public/                   # 公共访问目录
    ├── index.php             # 主页面
    ├── vacation/             # 假期管理子系统
    └── assets/               # 静态资源
        ├── style.css
        ├── core/             # 核心模块
        ├── ui/               # UI组件
        ├── features/         # 功能模块
        ├── interactions/     # 交互模块
        └── lib/              # 第三方库
```

## 安装和使用

### 环境要求
- PHP 7.4 或更高版本
- SQLite 支持
- Web 服务器（Apache/Nginx）

### 安装步骤
1. 上传所有文件到服务器
2. 确保 `data/` 目录有写权限
3. 访问 `public/index.php` 开始使用

### 配置说明
- 数据库位置：`data/data.sqlite`（自动创建）
- Logo数据库：`data/logo.db`
- 默认周上限：28小时（假期40小时）

## 使用指南

### 添加工作记录
1. 点击日历上的日期或"添加记录"按钮
2. 填写开始时间、结束时间、休息时间、时薪
3. 选择公司（可选）
4. 保存记录

### 假期管理
1. 菜单 → 假期管理
2. 设置假期开始和结束日期
3. 假期期间周工时上限自动调整为40小时

### 数据导出
- **CSV格式** - 操作 → 导出当月CSV
- **Excel格式** - 操作 → 导出当月Excel
- **PDF格式** - 操作 → 导出当月PDF

### 快捷键
- `T` - 回到今天
- `←` / `→` - 切换月份
- `D` - 切换深色模式
- `S` - 打开搜索
- `Esc` - 关闭弹窗

## 数据安全

- ✅ CSRF令牌保护所有POST请求
- ✅ SQL注入防护（使用PDO预处理语句）
- ✅ XSS防护（HTML实体转义）
- ✅ 输入验证（时间、日期、数字格式）
- ✅ 数据定期备份到 `backups/` 目录

## 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ⚠️ IE 不支持

- 🎉 初始版本发布
- ✅ 基础功能实现

## 许可证

本项目为个人使用项目。

## 联系方式

如有问题或建议，请联系开发者。

---

**Made with ❤️ for 留学生**
